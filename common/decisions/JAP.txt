#Category allowed for JAP

MAN_reclaim_china = {
	imperial_lineage_claims = { 
    	available = {
					
		}

		visible = {
			has_government = fascism
			is_puppet_of = JAP
			has_completed_focus = MAN_vassalize_ccp
			custom_trigger_tooltip = {
				  tooltip = MAN_get_north_china_tt
			any_state = {
			
			OR = {
			region = 231
			region = 144
			}
			
			CONTROLLER = {
			OR = {
			is_subject_of = JAP
			tag = JAP
			}
			}
			}
			
			}
		}
		cost = 10
		days_re_enable = 90
		complete_effect = {
		JAP = { country_event = { id = jap.311 days = 1 }}
		}
    }
}

JAP_intervene_in_china = {

	JAP_stalemate_timer = {

		priority = 10

		icon = generic_ignite_civil_war

		available = {
			hidden_trigger = { always = no }
		}

		days_mission_timeout = 150

		fire_only_once = yes

		activation = {
			has_war_with = CHI
		}

		visible = {
			tag = JAP
			has_war_with = CHI
		}

		cancel_if_not_visible = yes

		is_good = no

		timeout_effect = {
			country_event = japan.54
		}
	}
	
	JAP_capture_beijing_mission = {

		name = JAP_capture_beijing

		icon = eng_propaganda_campaigns

		allowed = {
			tag = JAP
		}

		available = {
			controls_province = 9843
		}

		fire_only_once = yes
		is_good = no

		days_mission_timeout = 150

		cancel_if_not_visible = yes

		activation = {
			has_war_with = CHI
		}

		visible = {
			tag = JAP
			has_war_with = CHI
		}

		complete_effect = {
			add_days_mission_timeout = {
				mission = JAP_stalemate_timer
				days = 15
			}
			608 = { set_state_flag = mission_succeeded }
			custom_effect_tooltip = boosted_plunder_tt
			hidden_effect = {
				add_days_mission_timeout = {
					mission = JAP_capture_beijing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_nanjing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_guangzhou_mission
					days = 15
				}			
				add_days_mission_timeout = {
					mission = JAP_capture_wuhan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_changsha_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_taiyuan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_kaifeng_mission
					days = 15
				}
				CHI = {
					add_days_mission_timeout = {
						mission = CHI_stalemate_timer
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_beijing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_nanjing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_guangzhou_mission
						days = 15
					}			
					add_days_mission_timeout = {
						mission = CHI_defend_wuhan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_changsha_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_taiyuan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_kaifeng_mission
						days = 15
					}	
				}
			}
		}
	}
	
	JAP_capture_nanjing_mission = {

		name = JAP_capture_nanjing

		icon = eng_propaganda_campaigns

		allowed = {
			tag = JAP
		}

		available = {
			controls_province = 11913
		}

		fire_only_once = yes
		is_good = no

		days_mission_timeout = 150

		cancel_if_not_visible = yes

		activation = {
			has_war_with = CHI
		}

		visible = {
			tag = JAP
			has_war_with = CHI
		}

		complete_effect = {
			add_days_mission_timeout = {
				mission = JAP_stalemate_timer
				days = 15
			}
			613 = { set_state_flag = mission_succeeded }
			custom_effect_tooltip = boosted_plunder_tt
			hidden_effect = {
				add_days_mission_timeout = {
					mission = JAP_capture_beijing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_nanjing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_guangzhou_mission
					days = 15
				}			
				add_days_mission_timeout = {
					mission = JAP_capture_wuhan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_changsha_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_taiyuan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_kaifeng_mission
					days = 15
				}
				CHI = {
					add_days_mission_timeout = {
						mission = CHI_stalemate_timer
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_beijing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_nanjing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_guangzhou_mission
						days = 15
					}			
					add_days_mission_timeout = {
						mission = CHI_defend_wuhan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_changsha_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_taiyuan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_kaifeng_mission
						days = 15
					}
				}
			}
		}
	}
	
	JAP_capture_guangzhou_mission = {

		name = JAP_capture_guangzhou

		icon = eng_propaganda_campaigns

		allowed = {
			tag = JAP
		}

		available = {
			controls_province = 1047
		}

		fire_only_once = yes
		is_good = no

		days_mission_timeout = 150

		cancel_if_not_visible = yes

		activation = {
			has_war_with = CHI
		}

		visible = {
			tag = JAP
			has_war_with = CHI
		}

		complete_effect = {
			add_days_mission_timeout = {
				mission = JAP_stalemate_timer
				days = 15
			}
			592 = { set_state_flag = mission_succeeded }
			custom_effect_tooltip = boosted_plunder_tt
			hidden_effect = {
				add_days_mission_timeout = {
					mission = JAP_capture_beijing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_nanjing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_guangzhou_mission
					days = 15
				}			
				add_days_mission_timeout = {
					mission = JAP_capture_wuhan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_changsha_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_taiyuan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_kaifeng_mission
					days = 15
				}
				CHI = {
					add_days_mission_timeout = {
						mission = CHI_stalemate_timer
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_beijing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_nanjing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_guangzhou_mission
						days = 15
					}			
					add_days_mission_timeout = {
						mission = CHI_defend_wuhan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_changsha_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_taiyuan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_kaifeng_mission
						days = 15
					}
				}
			}
		}
	}
	
	JAP_capture_wuhan_mission = {

		name = JAP_capture_wuhan

		icon = eng_propaganda_campaigns

		allowed = {
			tag = JAP
		}

		available = {
			controls_province = 4619
		}

		fire_only_once = yes
		is_good = no

		days_mission_timeout = 150

		cancel_if_not_visible = yes

		activation = {
			has_war_with = CHI
		}

		visible = {
			tag = JAP
			has_war_with = CHI
		}

		complete_effect = {
			add_days_mission_timeout = {
				mission = JAP_stalemate_timer
				days = 15
			}
			hidden_effect = {
				add_days_mission_timeout = {
					mission = JAP_capture_beijing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_nanjing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_guangzhou_mission
					days = 15
				}			
				add_days_mission_timeout = {
					mission = JAP_capture_wuhan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_changsha_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_taiyuan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_kaifeng_mission
					days = 15
				}
				CHI = {
					add_days_mission_timeout = {
						mission = CHI_stalemate_timer
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_beijing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_nanjing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_guangzhou_mission
						days = 15
					}			
					add_days_mission_timeout = {
						mission = CHI_defend_wuhan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_changsha_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_taiyuan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_kaifeng_mission
						days = 15
					}
				}
			}
		}
	}
	
	JAP_capture_changsha_mission = {

		name = JAP_capture_changsha

		icon = eng_propaganda_campaigns

		allowed = {
			tag = JAP
		}

		available = {
			controls_province = 7097
		}

		fire_only_once = yes
		is_good = no

		days_mission_timeout = 150

		cancel_if_not_visible = yes

		activation = {
			has_war_with = CHI
		}

		visible = {
			tag = JAP
			has_war_with = CHI
		}

		complete_effect = {
			add_days_mission_timeout = {
				mission = JAP_stalemate_timer
				days = 15
			}
			hidden_effect = {
				add_days_mission_timeout = {
					mission = JAP_capture_beijing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_nanjing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_guangzhou_mission
					days = 15
				}			
				add_days_mission_timeout = {
					mission = JAP_capture_wuhan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_changsha_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_taiyuan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_kaifeng_mission
					days = 15
				}
				CHI = {
					add_days_mission_timeout = {
						mission = CHI_stalemate_timer
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_beijing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_nanjing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_guangzhou_mission
						days = 15
					}			
					add_days_mission_timeout = {
						mission = CHI_defend_wuhan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_changsha_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_taiyuan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_kaifeng_mission
						days = 15
					}
				}
			}
		}
	}
	
	JAP_capture_taiyuan_mission = {

		name = JAP_capture_taiyuan

		icon = eng_propaganda_campaigns

		allowed = {
			tag = JAP
		}

		available = {
			controls_province = 1519
		}

		fire_only_once = yes
		is_good = no

		days_mission_timeout = 150

		cancel_if_not_visible = yes

		activation = {
			has_war_with = CHI
		}

		visible = {
			tag = JAP
			has_war_with = CHI
		}

		complete_effect = {
			add_days_mission_timeout = {
				mission = JAP_stalemate_timer
				days = 15
			}
			hidden_effect = {
				add_days_mission_timeout = {
					mission = JAP_capture_beijing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_nanjing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_guangzhou_mission
					days = 15
				}			
				add_days_mission_timeout = {
					mission = JAP_capture_wuhan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_changsha_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_taiyuan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_kaifeng_mission
					days = 15
				}
				CHI = {
					add_days_mission_timeout = {
						mission = CHI_stalemate_timer
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_beijing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_nanjing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_guangzhou_mission
						days = 15
					}			
					add_days_mission_timeout = {
						mission = CHI_defend_wuhan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_changsha_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_taiyuan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_kaifeng_mission
						days = 15
					}
				}
			}
		}
	}	
	
	JAP_capture_kaifeng_mission = {

		name = JAP_capture_kaifeng

		icon = eng_propaganda_campaigns

		allowed = {
			tag = JAP
		}

		available = {
			controls_province = 7656
		}

		fire_only_once = yes
		is_good = no

		days_mission_timeout = 150

		cancel_if_not_visible = yes

		activation = {
			has_war_with = CHI
		}

		visible = {
			tag = JAP
			has_war_with = CHI
		}

		complete_effect = {
			add_days_mission_timeout = {
				mission = JAP_stalemate_timer
				days = 15
			}
			hidden_effect = {
				add_days_mission_timeout = {
					mission = JAP_capture_beijing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_nanjing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_guangzhou_mission
					days = 15
				}			
				add_days_mission_timeout = {
					mission = JAP_capture_wuhan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_changsha_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_taiyuan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_kaifeng_mission
					days = 15
				}
				CHI = {
					add_days_mission_timeout = {
						mission = CHI_stalemate_timer
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_beijing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_nanjing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_guangzhou_mission
						days = 15
					}			
					add_days_mission_timeout = {
						mission = CHI_defend_wuhan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_changsha_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_taiyuan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_kaifeng_mission
						days = 15
					}					
				}
			}
		}
	}		
	
	JAP_china_step_up_war_effort = {

		icon = jap_conquer_china

		available = {
			JAP_has_idea_JAP_intervene_in_china = yes
			if = { limit = { has_idea = JAP_intervene_in_china_4 }
			OR = {
			    608 = { is_controlled_by_ROOT_or_ally = yes }
			    casualties > 50000
			}
			}
			if = { limit = { has_idea = JAP_intervene_in_china_3 }
			OR = {
			    608 = { is_controlled_by_ROOT_or_ally = yes }
			    casualties > 100000
			}
			}
			if = { limit = { has_idea = JAP_intervene_in_china_2 }
			OR = {
			    CHI = { surrender_progress > 0.1 }
			    casualties > 200000
			}
			}
		}

		visible = {
			JAP_has_idea_JAP_intervene_in_china = yes
			any_country = {
				is_literally_china = yes
				has_war_with = ROOT
			}
		}

		fire_only_once = no

		ai_will_do = {
			factor = 3
			modifier = {
				has_war_with = USA
				factor = 100 #screw it, kill everything
			}
			modifier = {
			    add = 100
				NOT = { controls_state = 609 }
			}
			modifier = {
			    add = 100
				NOT = { controls_state = 598 }
				date > 1938.6.1
			}
			modifier = {
			    add = 5
				NOT = { controls_state = 598 }
				date > 1937.9.19
			}
			modifier = {
			    add = 4
				date > 1939.6.1
			}
			modifier = {
				has_idea = JAP_intervene_in_china_4
				factor = 100
			}
			modifier = {
				has_idea = JAP_intervene_in_china_3
				factor = 50
			}
			
		}
		modifier = {

		}

		days_remove = 60
		days_re_enable = 0

		cost = 25

		complete_effect = {
			add_named_threat = { threat = 0.75 name = JAP_china_step_up_war_effort }
			USA = { add_war_support = 0.025 }
			if = { limit = { has_idea = JAP_intervene_in_china_4 NOT = { has_naval_treaty_trigger = yes } NOT = { has_country_flag = walkout } }
			    news_event = { id = japan.28 days = 5 }
				hidden_effect = { set_country_flag = walkout }
				
			else = {  if = { limit = { NOT = { has_country_flag = walkout }  has_idea = JAP_intervene_in_china_3 } 
			    custom_effect_tooltip = JAP_walkout_tooltip
			    news_event = { id = japan.28 days = 5 }
				}
			}
			}
			JAP_intervene_in_china_level_down = yes
			add_days_mission_timeout = {
				mission = JAP_stalemate_timer
				days = 15
			}
			hidden_effect = {
				MAN = { JAP_intervene_in_china_level_down = yes }
				add_days_mission_timeout = {
					mission = JAP_capture_beijing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_nanjing_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_guangzhou_mission
					days = 15
				}			
				add_days_mission_timeout = {
					mission = JAP_capture_wuhan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_changsha_mission
					days = 15
				}
				add_days_mission_timeout = {
					mission = JAP_capture_taiyuan_mission
					days = 15
				}	
				add_days_mission_timeout = {
					mission = JAP_capture_kaifeng_mission
					days = 15
				}				
				CHI = {
					add_days_mission_timeout = {
						mission = CHI_stalemate_timer
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_beijing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_nanjing_mission
						days = 15
					}
					add_days_mission_timeout = {
						mission = CHI_defend_guangzhou_mission
						days = 15
					}			
					add_days_mission_timeout = {
						mission = CHI_defend_wuhan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_changsha_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_taiyuan_mission
						days = 15
					}	
					add_days_mission_timeout = {
						mission = CHI_defend_kaifeng_mission
						days = 15
					}						
				}
			}
		}
	}
	JAP_wargoal_for_china = {

		icon = jap_conquer_china

		available = {
			date > 1937.3.1
			has_war_with = CHI
		}

		visible = {
			has_completed_focus = JAP_intervene_in_china
		}

		fire_only_once = yes

		ai_will_do = {
			factor = 900
		}

		modifier = {
			industrial_capacity_factory = 0.04
			industrial_capacity_dockyard = -0.04
			consumer_goods_factor = -0.03
		}
		days_remove = 180

		cost = 25

		complete_effect = {
			add_war_support = 0.025 
		}
	}
	JAP_ichi_go = {

		icon = jap_conquer_china

		available = {	
			event_target:WTT_current_china_leader = {
				has_capitulated = no
				exists = yes				
			}
			has_war_with = USA
		}

		visible = {
			has_completed_focus = JAP_secure_china
			any_country = {
				is_literally_china = yes
				has_war_with = ROOT
			}
		}

		fire_only_once = yes

		ai_will_do = {
			factor = 1
			modifier = {
				is_historical_focus_on = yes
				date < 1944.1.1
				controls_state = 609 #East Heibei, to ensure that Japan hasn't been kicked off the mainland
				factor = 0
			}
		}

		cost = 50
		days_remove = 180

		modifier = {
			civilian_factory_use = 5
		}

		complete_effect = {
			USA = { add_war_support = 0.1 }
			add_timed_idea = { idea = JAP_ichi_go days = 180 }
			activate_mission_tooltip = JAP_conquer_china
			set_country_flag = JAP_conquer_china_activate
			if = {	
				limit = {

					JAP = { is_ai = no }
					CHI = { is_ai = no }
				}
			every_state = {
				limit = {
					OR = {
						state = 603
						state = 748
						state = 605
						state = 751
						state = 752
						state = 601
						state = 747
						state = 325
						state = 744
						state = 750
						state = 602
						state = 599
						state = 600
						state = 620
						state = 325
						state = 604
						state = 753						
					}
				}
				remove_province_modifier = {
					static_modifiers = { unplanned_offensive_2 }
					province = {
						all_provinces = yes
					}
				}
			}
			
			every_state = {
				limit = {
					OR = {
						state = 746
						state = 622
						state = 283
						state = 754
						state = 616
						state = 755
						state = 756							
					}
				}
				remove_province_modifier = {
					static_modifiers = { unplanned_offensive_2 }
					province = {
						all_provinces = yes
					}
				}
			}
			}
			set_global_flag = ichi_go_jap
		}
	}
	JAP_conquer_china = {

		icon = jap_conquer_china

		available = {
			event_target:WTT_current_china_leader = {
				OR = {
					has_capitulated = yes
					exists = no
					is_subject_of = ROOT
				}
			}
		}

		visible = {
			JAP_has_idea_JAP_intervene_in_china = yes
			any_country = {
				is_literally_china = yes
				has_war_with = ROOT
			}
		}

		activation = {
			has_country_flag = JAP_conquer_china_activate
		}

		fire_only_once = yes

		is_good = no

		days_mission_timeout = 360
		
		timeout_effect = {
			add_stability = -0.05
			add_war_support = -0.15
		}

		complete_effect = {
			add_stability = 0.03
			add_popularity = {
			ideology = fascism
			popularity = 0.1
		    }
		}
	}
}
JAP_interservice_rivalry = {
	JAP_steel_for_guns = {

		icon = generic_tank

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_steel_for_ships
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_steel_for_ships
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 5
		}
		complete_effect = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			JAP_interservice_rivalry_towards_army = yes
			set_country_flag = JAP_steel_for_guns
		}
	}
	JAP_steel_for_ships = {

		icon = generic_naval

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_steel_for_guns
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_steel_for_guns
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 0
		}
		complete_effect = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			JAP_interservice_rivalry_towards_navy = yes
			set_country_flag = JAP_steel_for_ships
		}
	}
	JAP_prioritize_army_aircraft_construction = {

		icon = generic_tank

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_prioritize_naval_aircraft_construction
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_prioritize_naval_aircraft_construction
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 0
		}
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			add_ideas = JAP_prioritize_army_aircraft_construction
			JAP_interservice_rivalry_towards_army = yes
			set_country_flag = JAP_prioritize_army_aircraft_construction
		}
	}
	JAP_prioritize_naval_aircraft_construction = {

		icon = generic_naval

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_prioritize_army_aircraft_construction
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_prioritize_army_aircraft_construction
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			add_ideas = JAP_prioritize_naval_aircraft_construction
			JAP_interservice_rivalry_towards_navy = yes
			set_country_flag = JAP_prioritize_naval_aircraft_construction
		}
	}
	JAP_everybody_serves = {

		icon = generic_tank

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_draft_exemptions
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_draft_exemptions
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 0
		}
		modifier = {
			conscription = 0.02
		}
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			JAP_interservice_rivalry_towards_army = yes
			set_country_flag = JAP_everybody_serves
		}
	}
	JAP_draft_exemptions = {

		icon = generic_naval

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_everybody_serves
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_everybody_serves
			}
		}
		cost = 50
		days_remove = -1
		fire_only_once = yes
		ai_will_do = {
			factor = 3
		}
		modifier = {
			industrial_capacity_factory = 0.05
			industrial_capacity_dockyard = 0.05
		}
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			JAP_interservice_rivalry_towards_navy = yes
			set_country_flag = JAP_draft_exemptions
		}
	}
	JAP_raiding_regiments = {

		icon = generic_tank

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_special_air_landing_force
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_special_air_landing_force
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 0
		}
		modifier = {
			special_forces_min = 24
		}
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			set_country_flag = JAP_raiding_regiments
			JAP_interservice_rivalry_towards_army = yes
		}
	}
	JAP_special_air_landing_force = {

		icon = generic_naval

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			NOT = {
				has_country_flag = JAP_raiding_regiments
			}
		}
		visible = {
			NOT = {
				has_country_flag = JAP_raiding_regiments
			}
		}
		cost = 50
		fire_only_once = yes
		days_remove = -1
		ai_will_do = {
			factor = 1
		}
		modifier = {
			special_forces_attack_factor = 0.05 
			special_forces_defence_factor = 0.05
		}
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			set_country_flag = JAP_special_air_landing_force
			JAP_interservice_rivalry_towards_navy = yes
		}
	}
	JAP_favor_army = {

		icon = generic_tank

		available = {
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			AND = {
				OR = { 
					has_country_flag = JAP_raiding_regiments 
					has_country_flag = JAP_special_air_landing_force
				}
				OR = { 
					has_country_flag = JAP_everybody_serves
					has_country_flag = JAP_draft_exemptions
				}
				OR = { 
					has_country_flag = JAP_prioritize_naval_aircraft_construction
					has_country_flag = JAP_prioritize_army_aircraft_construction
				}
				OR = { 
					has_country_flag = JAP_steel_for_guns
					has_country_flag = JAP_steel_for_ships
				}
			}
			
		}
		visible = {
		    NOT = { has_idea = JAP_interservice_rivalry_army_dominant }
			AND = {
				OR = { 
					has_country_flag = JAP_raiding_regiments 
					has_country_flag = JAP_special_air_landing_force
				}
				OR = { 
					has_country_flag = JAP_everybody_serves
					has_country_flag = JAP_draft_exemptions
				}
				OR = { 
					has_country_flag = JAP_prioritize_naval_aircraft_construction
					has_country_flag = JAP_prioritize_army_aircraft_construction
				}
				OR = { 
					has_country_flag = JAP_steel_for_guns
					has_country_flag = JAP_steel_for_ships
				}
			}
		}
		cost = 50
		fire_only_once = yes
		ai_will_do = {
			factor = 0
			modifier = {
				add = 1
				OR = {				
					has_idea = JAP_interservice_rivalry_navy_strengthened
					has_idea = JAP_interservice_rivalry_navy_dominant
				}
			}
		}
		
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			JAP_interservice_rivalry_towards_army = yes
		}
	}
	JAP_favor_navy = {

		icon = generic_naval

		available = { 
			NOT = {
				has_country_flag = JAP_war_conferences_cd
			}
			AND = {
				OR = { 
					has_country_flag = JAP_raiding_regiments 
					has_country_flag = JAP_special_air_landing_force
				}
				OR = { 
					has_country_flag = JAP_everybody_serves
					has_country_flag = JAP_draft_exemptions
				}
				OR = { 
					has_country_flag = JAP_prioritize_naval_aircraft_construction
					has_country_flag = JAP_prioritize_army_aircraft_construction
				}
				OR = { 
					has_country_flag = JAP_steel_for_guns
					has_country_flag = JAP_steel_for_ships
				}
			}
			
		}
		visible = {
		    NOT = { has_idea = JAP_interservice_rivalry_navy_dominant }
			AND = {
				OR = { 
					has_country_flag = JAP_raiding_regiments 
					has_country_flag = JAP_special_air_landing_force
				}
				OR = { 
					has_country_flag = JAP_everybody_serves
					has_country_flag = JAP_draft_exemptions
				}
				OR = { 
					has_country_flag = JAP_prioritize_naval_aircraft_construction
					has_country_flag = JAP_prioritize_army_aircraft_construction
				}
				OR = { 
					has_country_flag = JAP_steel_for_guns
					has_country_flag = JAP_steel_for_ships
				}
			}
		}
		cost = 50
		fire_only_once = yes
		ai_will_do = {
			factor = 0
		}
		
		complete_effect = {
			set_country_flag = { flag = JAP_war_conferences_cd value = 1 days = 180 }
			JAP_interservice_rivalry_towards_navy = yes
		}
	}
}

foreign_politics = {
#    JAP_reorginized_china_instatement3 = {
#
#		icon = jap_conquer_china
#
#		available = {
#		    
#			    any_state = {
#				   is_core_of = CHI 
#				   is_fully_controlled_by = JAP
#				}
#			
#		}
#		
#		ai_will_do = {
#			factor = 2
#			modifier = {
#			     factor = 0
#				 CHI = { surrender_progress < 0.3 }
#			}
#		}
#
#		fire_only_once = no
#		days_re_enable = 45
#
#		visible = {
#		has_country_flag = jap_china_occupation_setup
#			has_completed_focus = JAP_intervene_in_china
#			OR = {
#			any_country = {
#				is_literally_china = yes
#				has_war_with = ROOT
#			}
#			custom_trigger_tooltip = {
#				tooltip = CHI_warred_with_JAP
#				has_global_flag = CHI_warred_with_JAP
#				NOT = {
#					has_war_with = CHI
#				}
#				}
#			}
#		}
#
#		complete_effect = {
#		every_state = {
#					limit = {
#						is_core_of = CHI 
#						NOT = {
#						    OR = {
#				            	state = 524 #  not taiwan, more?
#								state = 591
#	            			}
#						}
#				        is_fully_controlled_by = JAP
#					}
#					MEN = {
#			        	set_state_controller = PREV
#	          		}
#				}
#				every_state = {
#					limit = {
#						is_core_of = CHI 
#						NOT = {
#						    OR = {
#				            	state = 524 #  not taiwan, more?
#								state = 591
#	            			}
#						}
#				        is_owned_by = JAP
#					}
#					MEN = {
#			        	transfer_state = PREV
#	          		}
#				}
#				country_event = { id = japan.52 }
#		}
#	}
	
	JAP_sue_for_peace_CHI = {
        
		available = {
			always = no
			FROM = { 
				surrender_progress < 0.2 # if they are losing, lets not allow it
			}
			custom_trigger_tooltip = {
				tooltip = JAP_sue_for_peace_TT
				NOT = {
					controls_state = 525
					controls_state = 527
				}
				NOT = {
					any_state = {
						NOT = { state = 524 }
						is_core_of = CHI
						controller = {
							OR = {
								tag = JAP
								is_puppet_of = JAP
							}
						}
					}
				}
				MAN = {
					OR = {
						exists = no
						NOT = {
							is_subject_of = JAP
						}
						has_capitulated = yes
					}
				}
			}
		}

		target_trigger = {
			#Target is FROM
			FROM = {
				tag = CHI
				has_war_with = JAP
			}
		}

		visible = {
			always = no
			tag = JAP
			any_country = {
				is_literally_china = yes
				has_war_with = JAP
			}
		}

		cost = 0

		fire_only_once = yes

		ai_will_do = {
			factor = 400
		}

		complete_effect = {
			if = {
				limit = {
					has_global_flag = jap_civil_war_sf
					has_civil_war = yes
				}
				CHI = {
					country_event = { id = sfl.19 days = 1 }
				}
				else = {
					CHI = {
						country_event = { id = wtt_japan.126 days = 1 }
					}
				}
			}
		}
	}

	JAP_sue_for_peace_MCK = {

		available = {
			FROM = { 
				surrender_progress < 0.2 # if they are losing, lets not allow it
			}
			custom_trigger_tooltip = {
				tooltip = JAP_sue_for_peace_TT
				NOT = {
					controls_state = 525
					controls_state = 527
				}
				NOT = {
					any_state = {
						is_core_of = CHI
						NOT = {
							state = 524
						}
						OR = {
							is_controlled_by = JAP
							AND = {
								is_controlled_by = MEN
								MEN = { is_subject_of = JAP }
							}
						}
					}
				}
			}
		}

		target_trigger = {
			#Target is FROM
			FROM = {
				tag = MAN
				has_war_with = JAP
			}
		}

		visible = {
			tag = JAP
			has_war_with = MAN
		}

		cost = 0

		fire_only_once = yes

		ai_will_do = {
			factor = 400
		}

		complete_effect = {
			MAN = {
				country_event = { id = wtt_japan.129 days = 1 }
			}
		}
	}

	JAP_sue_for_peace_nuke = {
	   allowed = {
		   tag = JAP
		}
		available = {
			has_global_flag = JAP_nuke_1
			has_global_flag = JAP_nuke_2
			has_navy_size = { size < 40 }
			NOT = {
				controls_state = 526
				controls_state = 645
			}
		}

		visible = {
			has_war = yes
			has_global_flag = JAP_nuke_1
		}

		cost = 0

		days_remove = -1
		ai_will_do = {
			factor = 10
			modifier = {
				NOT = {
					controls_state = 525
					controls_state = 527
				}
				factor = 10
			}
		}

		modifier = {
			forced_surrender_limit = -1.0
		}

		remove_effect = {

		}

		remove_trigger = {
			has_war = no
		}
		complete_effect = {
			hidden_effect = {
				clr_global_flag = JAP_nuke_1
				clr_global_flag = JAP_nuke_2
			}
		}
	}
	JAP_sue_for_peace_nuke_mission = {
	    allowed = {
		   tag = JAP
		}
		available = {
			has_global_flag = JAP_nuke_1
			has_global_flag = JAP_nuke_2
		}

		visible = {
			NOT = {
				OR = {
					controls_state = 536
					controls_state = 533
					controls_state = 534
					controls_state = 532
					controls_state = 282
					controls_state = 530
					controls_state = 531
					controls_state = 528
					controls_state = 529
				}
			}
		}

		modifier = {
			
		}

		days_mission_timeout = 720
		fire_only_once = yes

		activation = {
			has_tech = nukes
			has_war_with = JAP
		}

		complete_effect = {
			JAP = {
				unlock_decision_tooltip = JAP_sue_for_peace_nuke
			}
		}
	}

	JAP_request_soviet_support = {
        allowed = {
		   tag = JAP
		}
		icon = generic_prepare_civil_war

		available = {
		}

		visible = {
			has_civil_war = yes
			has_government = communism
		}

		cost = 50
		fire_only_once = yes
		ai_will_do = {
			factor = 10
		}

		complete_effect = {
			SOV = { country_event = { id = wtt_japan.118 } }
		}
	}
}

#Category allowed for JAP
#Not visible if puppet
JAP_southern_expansion = {

	JAP_tora_tora_winner = {
		available = {
			OR = {
				is_ai = yes
				AND = {			
					ships_in_area = {
						type = carrier
						area  = 105
						size > 3   #was previously set to > 4, but that's a weird number for fleet which can only have 4 carriers
					}
					ships_in_area = {
						type = capital_ship
						area  = 105
						size > 3   
					}					
				}
			}
			
		}

		visible = {
			has_completed_focus = strike_usa_focus
		}

		fire_only_once = yes


		modifier = {

		}

		cost = 0

		ai_will_do = {
			factor = 10000
			modifier = {
				factor = 0
				date < 1941.12.7
			}
		}

		complete_effect = {
			declare_war_on = {
				target = USA
				type = annex_everything
			}
			country_event = { id = japan.33 }			
			USA = {
			country_event = { id = usa.65 }	
			}
			news_event = { id = news.403 }
		}
	}

	JAP_install_philip_puppet = {
		available = {
			is_ai = no
			AND = {
			623 = { is_controlled_by_ROOT_or_ally = yes }
			327 = { is_controlled_by_ROOT_or_ally = yes }
			624 = { is_controlled_by_ROOT_or_ally = yes }
			625 = { is_controlled_by_ROOT_or_ally = yes }
			627 = { is_controlled_by_ROOT_or_ally = yes }
			}
		}

		visible = {
			has_war_with = PHI
		}

		fire_only_once = yes


		modifier = {

		}

		cost = 10

		ai_will_do = {
			factor = 0
		}

		complete_effect = {
			PHI = {
			    if = {
		        	limit = { NOT = { 626 = { is_controlled_by = JAP } } }
					set_capital = 626
			    	transfer_state = 626
				}
				
				hidden_effect = {
				start_civil_war = {
				ideology = fascism
				size = 0.6
				capital = 327
				states = { 327 623 624 625 627 }
				}
				}
			}
			random_country = {
				limit = { 
					original_tag = PHI
					has_government = fascism
				}
				create_country_leader = {
					name = "Jos預. Laurel"
					desc = "POLITICS_WANG_JINGWEI_DESC"
					picture = "gfx/leaders/Asia/Portrait_Asia_Generic_2.dds"
					expire = "1965.1.1"
					ideology = fascism_ideology
					traits = {
						#
					}
				}
				
				if = {
		        	limit = { 623 = { is_fully_controlled_by = JAP } }
					set_state_controller = 623
				}
				if = {
		        	limit = { 623 = { is_owned_by = JAP } }
					transfer_state = 623
				}
				if = {
		        	limit = { 624 = { is_fully_controlled_by = JAP } }
					set_state_controller = 624
				}
				if = {
		        	limit = { 624 = { is_owned_by = JAP } }
					transfer_state = 624 
				}
				if = {
		        	limit = { 625 = { is_fully_controlled_by = JAP } }
					set_state_controller = 625 
				}
				if = {
		        	limit = { 625 = { is_owned_by = JAP } }
					transfer_state = 625
				}
				if = {
		        	limit = { 627 = { is_fully_controlled_by = JAP } }
					set_state_controller = 627 
				}
				if = {
		        	limit = { 627 = { is_owned_by = JAP } }
					transfer_state = 627
				}
				if = {
		        	limit = { 327 = { is_fully_controlled_by = JAP } }
					set_state_controller = 327 
				}
				if = {
		        	limit = { 327 = { is_owned_by = JAP } }
					transfer_state = 327
				}
			
				set_country_flag = JAP_puppet
				add_ideas = KMT_jap_military_advisors
				JAP = {
					set_autonomy = {
						target = PREV
						autonomous_state = autonomy_puppet
					}
				}
				diplomatic_relation = {
					relation = military_access
					country = MAN
					active = yes
				}
				diplomatic_relation = {
					relation = military_access
					country = MEN
					active = yes
				}
				MAN = {
					diplomatic_relation = {
						relation = military_access
						country = PREV
						active = yes
					}
				}
				MEN = {
					diplomatic_relation = {
						relation = military_access
						country = PREV
						active = yes
					}
				}			
			}
		}
	}

	JAP_install_Indonesia_puppet = {
		available = {
			is_ai = no
			335 = { is_controlled_by_ROOT_or_ally = yes }
			672 = { is_controlled_by_ROOT_or_ally = yes }
			334 = { is_controlled_by_ROOT_or_ally = yes }

		}

		visible = {
			has_war_with = INS
		}

		fire_only_once = yes


		modifier = {

		}

		cost = 10

		ai_will_do = {
			factor = 0
		}

		complete_effect = {
			INS = {
				set_capital = 668
				transfer_state = 688
				hidden_effect = {
					set_state_controller = 335
					set_state_controller = 672
					set_state_controller = 334
					if = {
						limit = {
							334 = {
								owner = { original_tag = INS }
							}
						}
						set_state_controller = 334
					}
					if = {
						limit = {
							335 = {
								owner = { original_tag = INS }
							}
						}
						set_state_controller = 335
					}
					if = {
						limit = {
							672 = {
								owner = { original_tag = INS }
							}
						}
						set_state_controller = 672
					}				
				}
				start_civil_war = {
				ideology = fascism
				size = 0.6
				capital = 335
				states = { 334 335 672 }
				}
			}
			random_country = {
				limit = { 
					original_tag = INS
					has_government = fascism
				}
				create_country_leader = {
					name = "Suharto"
					desc = ""
					picture = "gfx/leaders/Asia/Portrait_Asia_Generic_fascism.dds"
					expire = "1953.3.1"
					ideology = fascism_ideology # except for no connection to catholicism, this party perfectly fits into falangism 
					traits = {
					}
				}
				set_country_flag = JAP_puppet
				set_country_flag = WJW
				set_party_name = { ideology = fascism long_name = KMT_wjw name = KMT_wjw }
				JAP = {
					set_autonomy = {
						target = PREV
						autonomous_state = autonomy_puppet
					}
				}
				diplomatic_relation = {
					relation = military_access
					country = MAN
					active = yes
				}
				diplomatic_relation = {
					relation = military_access
					country = MEN
					active = yes
				}
				MAN = {
					diplomatic_relation = {
						relation = military_access
						country = PREV
						active = yes
					}
				}
				MEN = {
					diplomatic_relation = {
						relation = military_access
						country = PREV
						active = yes
					}
				}			
			}
		}
	}
	
	JAP_pressure_france = { 

		available = {
			16 = { NOT = { is_controlled_by = FRA } }
			OR = { 
			599 = {  is_controlled_by_ROOT_or_ally = yes }
			594 = {  is_controlled_by_ROOT_or_ally = yes }
			325 = {  is_controlled_by_ROOT_or_ally = yes }
			}
			289 = {  is_controlled_by_ROOT_or_ally = yes }
			custom_trigger_tooltip = {
				tooltip = demand_indochina_focus_tt
				NOT = { has_war_with = FRA }
				NOT = { is_in_faction_with = FRA }
				OR = {
					286 = { is_fully_controlled_by = CAM }
					670 = { is_fully_controlled_by = CAM }
					671 = { is_fully_controlled_by = CAM }
				}
			}
		}

		visible = {
			CAM = {
				is_subject_of = FRA
			}
		}

		fire_only_once = yes


		modifier = {

		}

		cost = 50

		ai_will_do = {
			factor = 5		
			modifier = {
				factor = 300
				date > 1941.2.2
				OR = {
					16 = { NOT = { is_controlled_by = FRA } } #Paris
					strength_ratio = {
						tag = FRA
						ratio > 0.9
					}
				}
			}
		}

		complete_effect = {
			FRA = { country_event = { id = france.1 } }
		}

	}
	
	JAP_pressure_germany = { 

		available = {
			OR = { 
			599 = {  is_controlled_by_ROOT_or_ally = yes }
			594 = {  is_controlled_by_ROOT_or_ally = yes }
			325 = {  is_controlled_by_ROOT_or_ally = yes }
			}
			289 = {  is_controlled_by_ROOT_or_ally = yes }
			custom_trigger_tooltip = {
				tooltip = demand_indochina_focus_tt
				NOT = { has_war_with = GER }
				NOT = { is_in_faction_with = GER }
				OR = {
					286 = { is_fully_controlled_by = CAM }
					670 = { is_fully_controlled_by = CAM }
					671 = { is_fully_controlled_by = CAM }
				}
			}
		}

		visible = {
			CAM = {
				is_subject_of = GER
			}
		}

		fire_only_once = yes


		modifier = {

		}

		cost = 50

		ai_will_do = {
			factor = 5		
			modifier = {
				factor = 300
				date > 1941.2.2
				OR = {
					strength_ratio = {
						tag = GER
						ratio > 0.9
					}
				}
			}
		}

		complete_effect = {
			GER = { country_event = { id = france.1 } }
		}

	}
}

#Category allowed for JAP

political_actions = {
	JAP_break_the_london_naval_treaty = {

		icon = generic_break_treaty

		allowed = {
			original_tag = JAP
		}

		available = {
              date > 1936.8.1
		}

		visible = {
			has_naval_treaty_trigger = yes
			#has_completed_focus = JAP_join_the_london_naval_treaty
		}

		fire_only_once = yes


		modifier = {

		}

		days_remove = 0
		days_re_enable = 0

		cost = 25

		ai_will_do = {
			factor = 0
		}

		complete_effect = {
		    london_naval_treaty_clear_all = yes
			add_tech_bonus = {
				name = bb_bonus
				bonus = 0.3
				uses = 2
				category = bb_tech
			}
			set_country_flag = broke_london_flag
			effect_tooltip = {
			FRA = { add_opinion_modifier = { target = ROOT modifier = JAP_broke_the_london_naval_treaty } }
			USA = { add_opinion_modifier = { target = ROOT modifier = JAP_broke_the_london_naval_treaty } }
			ENG = { add_opinion_modifier = { target = ROOT modifier = JAP_broke_the_london_naval_treaty } }
			}	
			save_global_event_target_as = broke_london_treaty
			news_event = { id = japan.37 days = 1 }
		}		
	}
}


operations = {
	
	

	JAP_tora_tora_tora = {

		icon = decision_generic_naval

		available = {
		    original_tag = JAP
			OR = {
				has_war_with = HOL
				has_war_with = ENG
				has_war_with = USA
				has_war_with = FRA
			}		
		}
	
		fire_only_once = yes
	
		days_mission_timeout = 120
	
		activation = {
			has_decision = JAP_tora_tora_winner
		}
		
		visible = {
			has_completed_focus = JAP_strike_on_the_southern_resource_area
		}
	
		complete_effect = {
			add_timed_idea = { idea = JAP_tora_tora_tora_idea days = 120 }
		}
		
		ai_will_do = {
			factor = 100
		}
	}
	
	JAP_war_soviets = {
		icon = border_war
		allowed = {
			original_tag = JAP
		}

		available = {
			or = {
				has_completed_focus = JAP_control_pacific
				has_completed_focus = JAP_Northern
			}
		}

		visible = {
			or = {
				has_completed_focus = JAP_control_pacific
				has_completed_focus = JAP_Northern
			}
		}

		highlight_states = {
			state = 408
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 1
			modifier = {
				is_historical_focus_on = yes
				date < 1942.7.1
				factor = 0
			}
			modifier = {
				is_historical_focus_on = yes
				RAJ = { 
					OR = { 
						has_capitulated = no
						NOT = { 
							has_war_with = JAP 
						} 
					} 
				} 
				AST = { 
					OR = { 
						has_capitulated = no
						NOT = { 
							has_war_with = JAP 
						} 
					} 
				} 
				factor = 0
			}
			modifier = {
				date < 1943.6.1
				has_war_with = USA
				SOV = { surrender_progress < 0.27 }
				factor = 0
			}
			modifier = {
				JAP = { surrender_progress > 0.03 }
				factor = 0
			}
		}
		cost = 0
		days_remove = 27
		war_with_on_remove = SOV
		complete_effect = {
			hidden_effect = {
				set_global_flag = JAP_prepare_war
			}
		}
		remove_effect = {
			declare_war_on = {
				target = SOV
				type = annex_everything
			}
		}
	}


	#first border incident
	JAP_test_the_soviets = {
		icon = border_war
		allowed = {
			original_tag = JAP
		}

		available = {
			NOT = {
				has_war_with = SOV
				is_in_faction_with = SOV
			}
			527 = {
				any_neighbor_state = {
					is_controlled_by = SOV
				}
			}
		}

		visible = {
			NOT = {
				has_global_flag = JAP_kalkin_gol
			}
		}

		highlight_states = {
			OR = {
				state = 408
				state = 527
			}
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 1
			modifier = {
				is_historical_focus_on = yes
				date < 1939.1.1
				factor = 0
			}
		}
		cost = 50
		days_remove = 30
		war_with_on_remove = SOV
		complete_effect = {
			527 = {
				save_event_target_as = JAP_SOV_attacker_state
				set_state_flag = border_incident_active
			}
			408 = {
				save_event_target_as = JAP_SOV_defender_state
				set_state_flag = border_incident_active
			}
			SOV = {
				country_event = { id = japan_border_conflict.1 days = 1 }
				activate_targeted_decision = { target = JAP decision = JAP_border_conflict_warning_SOV }
			}
		}
		remove_effect = {
			activate_targeted_decision = { target = SOV decision = JAP_border_incident_forgotten }
			activate_targeted_decision = { target = SOV decision = JAP_escalate_incident_to_border_conflict_SOV }
		}
	}

	#Mission for defender warning that a conflict with FROM is coming
	JAP_border_conflict_warning_SOV = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			hidden_trigger = { always = no }
		}

		war_with_target_on_timeout = yes
		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		days_mission_timeout = 30

		fire_only_once = yes

		is_good = no
		
		timeout_effect = {
			custom_effect_tooltip = escalation_possible_tooltip_for_defender
			custom_effect_tooltip = effects_if_border_conflict_is_lost
			effect_tooltip = {
				JAP = {
					add_tech_bonus = {
						name = sov_jap_border_conflict_won
						category = land_doctrine
						bonus = 0.5
					}
					add_tech_bonus = {
						name = sov_jap_border_conflict_won
						category = armor
						bonus = 0.5
					}
				}
			}
			hidden_effect = {
				remove_targeted_decision = { target = JAP decision = JAP_border_conflict_warning_SOV }
				activate_targeted_decision = { target = JAP decision = JAP_border_conflict_escalation_warning_SOV }
			}
		}
	}

	#Mission for defender warning FROM can escalate to war at any point is coming
	JAP_border_conflict_escalation_warning_SOV = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			#var:ROOT.defender_state_vs_@FROM = {
			#	has_ROOT_at_least_1_div_in_current_state_scope = yes
			#}
			hidden_trigger = { always = no }
		}

		highlight_states = {
		}

		war_with_target_on_timeout = yes
		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		days_mission_timeout = 30

		fire_only_once = yes

		is_good = no

		timeout_effect = {
			custom_effect_tooltip = from_cannot_escalate
			custom_effect_tooltip = effects_if_border_conflict_is_lost
			effect_tooltip = {
				JAP = {
					add_tech_bonus = {
						name = sov_jap_border_conflict_won
						category = land_doctrine
						bonus = 0.5
					}
					add_tech_bonus = {
						name = sov_jap_border_conflict_won
						category = armor
						bonus = 0.5
					}
				}
			}
		}		
	}
	#Mission for attacker to escalate or incident is forgotten
	JAP_border_incident_forgotten = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			#var:ROOT.defender_state_vs_@FROM = {
			#	has_ROOT_at_least_1_div_in_current_state_scope = yes
			#}
			hidden_trigger = { always = no }
		}

		highlight_states = {
			OR = {
				state = 527
				state = 408
			}
		}

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		days_mission_timeout = 30

		fire_only_once = yes

		is_good = no
		
		timeout_effect = {
			remove_targeted_decision = { target = SOV decision = JAP_escalate_incident_to_border_conflict_SOV }
			add_political_power = -100
			add_war_support = -0.1 #Shameful Display
			hidden_effect = {
				SOV = { remove_targeted_decision = { target = JAP decision = JAP_border_conflict_escalation_warning_SOV } }
				SOV = {
					527 = {
						clr_state_flag = border_incident_active
					}
					408 = {
						clr_state_flag = border_incident_active
					}
				}
			}
		}
	}

	#Decision to escalate incident on border with SOV to border conflict
	JAP_escalate_incident_to_border_conflict_SOV = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			527 = {
				OR = {
					is_fully_controlled_by = ROOT
					CONTROLLER = {
						is_subject_of = ROOT
					}
					CONTROLLER = {
						is_in_faction_with = ROOT
					}
				}
			}
			divisions_in_border_state = {
				state = 527
				border_state = 408
				size > 0
			}
		}

		highlight_states = {
			OR = {
				state = 527
				state = 408			
			}
		}

		ai_will_do = {
			base = 10
			modifier = { 
				has_war = no
				factor = 10
			}
		}

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			remove_targeted_decision = { target = SOV decision = JAP_border_incident_forgotten }
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = 527
					num_provinces = 4
					on_win = japan_border_conflict.2
					on_lose = japan_border_conflict.3
					on_cancel = japan_border_conflict.4
				}
				
				defender = {
					state = 408
					num_provinces = 4
					on_win = japan_border_conflict.3
					on_lose = japan_border_conflict.2
					on_cancel = japan_border_conflict.4
				}
			}
			SOV = {
				activate_targeted_decision = { target = JAP decision = JAP_border_conflict_escalate_conflict }
				activate_targeted_decision = { target = JAP decision = JAP_border_conflict_time_until_cancelled }
			}
			activate_targeted_decision = { target = SOV decision = JAP_border_conflict_escalate_conflict }
			activate_targeted_decision = { target = SOV decision = JAP_border_conflict_time_until_cancelled }
		}
	}
	#Mission for attacker to win border war against FROM in X days
	JAP_border_conflict_time_until_cancelled = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			527 = { has_border_war = no }
			408 = { has_border_war = no }
		}
		
		highlight_states = {
			OR = {
				state = 408
				state = 527
			}
		}

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		days_mission_timeout = 90
		is_good = no

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {

		}

		timeout_effect = {
			cancel_border_war = {
				defender = 408
				attacker = 527
			}
			hidden_effect = {
				remove_targeted_decision = { target = SOV decision = JAP_border_conflict_escalate_conflict }
				remove_targeted_decision = { target = JAP decision = JAP_border_conflict_escalate_conflict }
			}
		}
	}

	#Decision to escalate conflict further
	JAP_border_conflict_escalate_conflict = {

		icon = decision_generic_ignite_civil_war

		allowed = { always = no } #Activated from effect

		visible = {
			has_border_war_with = FROM
		}

		highlight_states = {
			OR = {
				state = 527
				state = 408
			}
		}

		cost = 200

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				set_border_war_data = {
					attacker = 527
					defender = 408
					defender_modifier = 0.15
					combat_width = 100
				}
			}
			else = {
				set_border_war_data = {
					attacker = 527
					defender = 408
					attacker_modifier = 0.15
					combat_width = 100
				}
			}
			SOV = {
				set_country_flag = {
					flag = WTT_border_conflict_escalate_to_war_cooldown_@ROOT
					days = 60
					value = 1
				}
				remove_targeted_decision = { target = JAP decision = JAP_border_conflict_escalate_conflict }
			}
			set_country_flag = {
				flag = WTT_border_conflict_escalate_to_war_cooldown_@SOV
				days = 60
				value = 1
			}
			custom_effect_tooltip = in_60_days
			activate_targeted_decision = { target = SOV decision = JAP_border_conflict_escalate_to_war }
		}
	}

	#Decision to escalate conflict further
	JAP_border_conflict_escalate_to_war = {

		icon = decision_generic_ignite_civil_war

		allowed = { always = no } #Activated from effect

		visible = {
			NOT = { has_country_flag = WTT_border_conflict_escalate_to_war_cooldown_@FROM }
			has_border_war_with = FROM
		}

		highlight_states = {
			OR = {
				state = 408
				state = 527
			}
		}

		cost = 150

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		days_remove = 15

		fire_only_once = yes #Reactivation handled in effect

		war_with_target_on_remove = yes

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				408 = { save_event_target_as = their_state }
				527 = { save_event_target_as = our_state }
			}
			else = {
				527 = { save_event_target_as = our_state }
				408 = { save_event_target_as = their_state }
			}
			SOV = {
				country_event = { id = japan_border_conflict.5 }
				hidden_effect = {
					remove_targeted_decision = { target = JAP decision = JAP_border_conflict_escalate_to_war }
				}
		 	}
		}

		remove_effect = {
			cancel_border_war = {
				dont_fire_events = yes
				defender = 408
				attacker = 527
			}
			declare_war_on = { target = FROM type = annex_everything }
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				527 = {
					clr_state_flag = border_incident_active
				}
				408 = {
					clr_state_flag = border_incident_active
				}
				
			}
			else = {
				FROM = {
					527 = {
						clr_state_flag = border_incident_active
					}
					408 = {
						clr_state_flag = border_incident_active
					}
				}
			}
		}
	}

	#Decision to back down from conflict
	JAP_border_conflict_back_out_of_conflict = {

		allowed = { always = no } #Activated from effect

		visible = {
			has_border_war_with = FROM
		}

		highlight_states = {
			OR = {
				state = 527
				state = 408
			}
		}

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				finalize_border_war = {
					attacker_win = yes
					attacker = 527
					defender = 408
				}
			}
			else = {
				finalize_border_war = {
					attacker = 527
					defender = 408
					defender_win = yes
				}
			}
		}
	}
	
	JAP_border_conflict_SHX_start = {
		icon = border_war
		allowed = {
			original_tag = JAP
		}

		available = {
			has_completed_focus = JAP_build_up_the_manchurian_army

			NOT = {
				has_war_with = SHX
				is_in_faction_with = SHX
			}
			611 = {
				any_neighbor_state = {
					is_controlled_by = SHX
				}
				is_controlled_by_ROOT_or_ally = yes
			}
		}

		visible = {
			NOT = {
				has_full_control_of_state = 621
			}
			NOT = {
				has_war_with = SHX
				is_in_faction_with = SHX
			}
			621 = {
				is_controlled_by = SHX
			}
		}

		highlight_states = {
			state = 621
		}
		
		fire_only_once = yes
		
		ai_will_do = {
			factor = 1
		modifier = {
			factor = 0
			MEN = {
				exists = yes
			}
		}
		}
		
		cost = 50
		days_remove = 30
		war_with_on_remove = SHX
		
		complete_effect = {
			611 = {
				save_event_target_as = JAP_SHX_attacker_state
				set_state_flag = border_incident_active
			}
			621 = {
				save_event_target_as = JAP_SHX_defender_state
				set_state_flag = border_incident_active
			}
			SHX = {
				country_event = { id = japan_border_conflict.1 days = 1 }
				activate_targeted_decision = { target = JAP decision = JAP_border_conflict_warning_SHX }
			}
		}
		
		remove_effect = {
			activate_targeted_decision = { target = SHX decision = JAP_border_incident_forgotten_SHX }
			activate_targeted_decision = { target = SHX decision = JAP_escalate_incident_to_border_conflict_SHX }
		}
	}

	#Mission for defender warning that a conflict with FROM is coming
	JAP_border_conflict_warning_SHX = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			hidden_trigger = { always = no }
		}

		war_with_target_on_timeout = yes
		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		days_mission_timeout = 30

		fire_only_once = yes

		is_good = no
		
		timeout_effect = {
			custom_effect_tooltip = escalation_possible_tooltip_for_defender
			custom_effect_tooltip = effects_if_border_conflict_is_lost
			effect_tooltip = {
				JAP = {
					army_experience = 10
		add_tech_bonus = {
			name = japan.45.t #test_the_ussr_focus
			bonus = 0.3
			uses = 1
			category = infantry_weapons
		}
					
				}
			}
			hidden_effect = {
				remove_targeted_decision = { target = JAP decision = JAP_border_conflict_warning_SHX }
				activate_targeted_decision = { target = JAP decision = JAP_border_conflict_escalation_warning_SHX }
			}
		}
	}

	#Mission for defender warning FROM can escalate to war at any point is coming
	JAP_border_conflict_escalation_warning_SHX = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			#var:ROOT.defender_state_vs_@FROM = {
			#	has_ROOT_at_least_1_div_in_current_state_scope = yes
			#}
			hidden_trigger = { always = no }
		}

		highlight_state_targets = {
		}

		war_with_target_on_timeout = yes
		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		days_mission_timeout = 30

		fire_only_once = yes

		is_good = no

		timeout_effect = {
			custom_effect_tooltip = from_cannot_escalate
			custom_effect_tooltip = effects_if_border_conflict_is_lost
		}		
	}
	#Mission for attacker to escalate or incident is forgotten
	JAP_border_incident_forgotten_SHX = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			#var:ROOT.defender_state_vs_@FROM = {
			#	has_ROOT_at_least_1_div_in_current_state_scope = yes
			#}
			hidden_trigger = { always = no }
		}

		highlight_states = {
			OR = {
				state = 611
				state = 621
			}
		}

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		days_mission_timeout = 30

		fire_only_once = yes

		is_good = no
		
		timeout_effect = {
			remove_targeted_decision = { target = SHX decision = JAP_escalate_incident_to_border_conflict_SHX }
			add_political_power = -75
			add_war_support = -0.05
			hidden_effect = {
				SHX = { remove_targeted_decision = { target = JAP decision = JAP_border_conflict_escalation_warning_SHX } }
				SHX = {
					611 = {
						clr_state_flag = border_incident_active
					}
					621 = {
						clr_state_flag = border_incident_active
					}
				}
			}
		}
	}

	#Decision to escalate incident on border with SHX to border conflict
	JAP_escalate_incident_to_border_conflict_SHX = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			611 = {
				OR = {
					is_fully_controlled_by = ROOT
					CONTROLLER = {
						is_subject_of = ROOT
					}
					CONTROLLER = {
						is_in_faction_with = ROOT
					}
				}
			}
			divisions_in_border_state = {
				state = 611
				border_state = 621
				size > 0
			}
		}

		highlight_states = {
			OR = {
				state = 611
				state = 621			
			}
		}

		ai_will_do = {
			base = 10
			modifier = { 
				has_war = no
				factor = 10
			}
		}

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			remove_targeted_decision = { target = SHX decision = JAP_border_incident_forgotten_SHX }
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = 611
					num_provinces = 4
					on_win = japan_border_conflict.7
					on_lose = japan_border_conflict.6
					on_cancel = japan_border_conflict.6
				}
				
				defender = {
					state = 621
					num_provinces = 4
					on_win = japan_border_conflict.6
					on_lose = japan_border_conflict.7
					on_cancel = japan_border_conflict.6
				}
			}
			SHX = {
				activate_targeted_decision = { target = JAP decision = JAP_border_conflict_escalate_conflict_SHX }
				activate_targeted_decision = { target = JAP decision = JAP_border_conflict_time_until_cancelled_SHX }
			}
			activate_targeted_decision = { target = SHX decision = JAP_border_conflict_escalate_conflict_SHX }
			activate_targeted_decision = { target = SHX decision = JAP_border_conflict_time_until_cancelled_SHX }
		}
	}
	
	#Mission for attacker to win border war against FROM in X days
	JAP_border_conflict_time_until_cancelled_SHX = {

		icon = border_war

		allowed = { always = no } #Activated from effect

		available = {
			611 = { has_border_war = no }
			621 = { has_border_war = no }
		}
		
		highlight_states = {
			OR = {
				state = 611
				state = 621
			}
		}

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		days_mission_timeout = 90
		is_good = no

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			
		}

		timeout_effect = {
			cancel_border_war = {
				defender = 611
				attacker = 621
			}
			hidden_effect = {
				remove_targeted_decision = { target = SHX decision = JAP_border_conflict_escalate_conflict_SHX }
				remove_targeted_decision = { target = JAP decision = JAP_border_conflict_escalate_conflict_SHX }
			}
		}
	}

	#Decision to escalate conflict further
	JAP_border_conflict_escalate_conflict_SHX = {

		icon = decision_generic_ignite_civil_war

		allowed = { always = no } #Activated from effect

		visible = {
			has_border_war_with = FROM
		}

		highlight_states = {
			OR = {
				state = 611
				state = 621
			}
		}

		cost = 200

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				set_border_war_data = {
					attacker = 611
					defender = 621
					defender_modifier = 0.15
					combat_width = 100
				}
			}
			else = {
				set_border_war_data = {
					attacker = 611
					defender = 621
					attacker_modifier = 0.15
					combat_width = 100
				}
			}
			SHX = {
				set_country_flag = {
					flag = WTT_border_conflict_escalate_to_war_cooldown_@ROOT
					days = 60
					value = 1
				}
				remove_targeted_decision = { target = JAP decision = JAP_border_conflict_escalate_conflict_SHX }
			}
			set_country_flag = {
				flag = WTT_border_conflict_escalate_to_war_cooldown_@SHX
				days = 60
				value = 1
			}
			custom_effect_tooltip = in_60_days
			activate_targeted_decision = { target = SHX decision = JAP_border_conflict_escalate_to_war_SHX }
		}
	}

	#Decision to escalate conflict further
	JAP_border_conflict_escalate_to_war_SHX = {

		icon = decision_generic_ignite_civil_war

		allowed = { always = no } #Activated from effect

		visible = {
			NOT = { has_country_flag = WTT_border_conflict_escalate_to_war_cooldown_@FROM }
			has_border_war_with = FROM
		}

		highlight_states = {
			OR = {
				state = 611
				state = 621
			}
		}

		cost = 150

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		days_remove = 15

		fire_only_once = yes #Reactivation handled in effect

		war_with_target_on_remove = yes

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				611 = { save_event_target_as = their_state }
				621 = { save_event_target_as = our_state }
			}
			else = {
				611 = { save_event_target_as = our_state }
				621 = { save_event_target_as = their_state }
			}
			SHX = {
				country_event = { id = japan_border_conflict.5 }
				hidden_effect = {
					remove_targeted_decision = { target = JAP decision = JAP_border_conflict_escalate_to_war_SHX }
				}
		 	}
		}

		remove_effect = {
			cancel_border_war = {
				dont_fire_events = yes
				defender = 621
				attacker = 611
			}
			declare_war_on = { target = FROM type = annex_everything }
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				611 = {
					clr_state_flag = border_incident_active
				}
				621 = {
					clr_state_flag = border_incident_active
				}
				
			}
			else = {
				FROM = {
					611 = {
						clr_state_flag = border_incident_active
					}
					621 = {
						clr_state_flag = border_incident_active
					}
				}
			}
		}
	}

	#Decision to back down from conflict
	JAP_border_conflict_back_out_of_conflict_SHX = {

		allowed = { always = no } #Activated from effect

		visible = {
			has_border_war_with = FROM
		}

		highlight_states = {
			OR = {
				state = 611
				state = 621
			}
		}

		ai_will_do = {
			base = 0
			modifier = {
				
			}
		}

		fire_only_once = yes #Reactivation handled in effect

		complete_effect = {
			if = {
				limit = { is_border_conflict_defender_vs_FROM = yes }
				finalize_border_war = {
					attacker_win = yes
					attacker = 611
					defender = 621
				}
			}
			else = {
				finalize_border_war = {
					attacker = 611
					defender = 621
					defender_win = yes
				}
			}
		}
	}
}

JAP_develop_conquests = {
	JAP_develop_north_sakhalin_oil_deposits = { #655
		icon = oil

		highlight_state_targets = {
			state = 655
		}

		allowed = {
			original_tag = JAP
		}

		available = {
			655 = { is_controlled_by_ROOT_or_ally = yes }
			has_tech = excavation2
		}

		visible = {
			has_completed_focus = JAP_establish_the_northern_resource_area
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			655 = {
				add_resource = {
					type = oil
					amount = 8
				}
			}
		}
	}

	JAP_develop_luzon_chromium_deposits = { #623
		icon = chromium

		highlight_state_targets = {
			state = 623
		}

		allowed = {
			original_tag = JAP
		}

		available = {
			623 = { is_controlled_by_ROOT_or_ally = yes }
			has_tech = excavation3
		}

		visible = {
			has_completed_focus = JAP_exploit_the_southern_resource_area
			623 = {
				NOT = {
					has_state_flag = luzon_chromium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			623 = {
				add_resource = {
					type = chromium
					amount = 12
				}
				set_state_flag = luzon_chromium_developed
			}
		}
	}

	JAP_develop_mindanao_steel_deposits = { #627
		icon = steel

		highlight_state_targets = {
			state = 627
		}

		allowed = {
			original_tag = JAP
		}

		available = {
			627 = { is_controlled_by_ROOT_or_ally = yes }
			has_tech = excavation4
		}

		visible = {
			has_completed_focus = JAP_exploit_the_southern_resource_area
			627 = {
				NOT = {
					has_state_flag = mindanao_steel_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			627 = {
				add_resource = {
					type = steel
					amount = 12
				}
				set_state_flag = mindanao_steel_developed
			}
		}
	}

	JAP_develop_samar_steel_deposits = { #625
		icon = steel

		highlight_state_targets = {
			state = 625
		}

		allowed = {
			original_tag = JAP
		}

		available = {
			625 = { is_controlled_by_ROOT_or_ally = yes }
			has_tech = excavation3
		}

		visible = {
			has_completed_focus = JAP_exploit_the_southern_resource_area
			625 = {
				NOT = {
					has_state_flag = samar_steel_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			625 = {
				add_resource = {
					type = steel
					amount = 10
				}
				set_state_flag = samar_steel_developed
			}
		}
	}

	JAP_develop_nauru_tungsten_deposits = { #725
		icon = tungsten

		allowed = {
			original_tag = JAP
		}

		highlight_state_targets = {
			state = 725
		}

		available = {
			725 = { is_controlled_by_ROOT_or_ally = yes }
			has_tech = excavation4
		}

		visible = {
			has_completed_focus = JAP_exploit_the_southern_resource_area
			725 = {
				NOT = {
					has_state_flag = nauru_tungsten_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			725 = {
				add_resource = {
					type = tungsten
					amount = 4
				}
				set_state_flag = nauru_tungsten_developed
			}
		}
	}
	JAP_develop_tonkin_aluminium_deposits = { #671
		icon = aluminium
		
		allowed = {
			original_tag = JAP
		}

		available = {
			671 = { is_controlled_by_ROOT_or_ally = yes }
			has_tech = excavation4
		}

		visible = {
			has_completed_focus = JAP_exploit_the_southern_resource_area
			671 = {
				NOT = {
					has_state_flag = tonkin_aluminium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			671 = {
				add_resource = {
					type = aluminium
					amount = 10
				}
				set_state_flag = tonkin_aluminium_developed
			}
		}
	}
	JAP_develop_singapore_aluminium_deposits = { #336
		icon = aluminium
		
		allowed = {
			original_tag = JAP
		}

		available = {
			336 = { is_controlled_by_ROOT_or_ally = yes }
			has_tech = excavation2
		}

		visible = {
			has_completed_focus = JAP_exploit_the_southern_resource_area
			336 = {
				NOT = {
					has_state_flag = singapore_aluminium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			336 = {
				add_resource = {
					type = aluminium
					amount = 16
				}
				set_state_flag = singapore_aluminium_developed
			}
		}
	}

	#Below is visible when JAP_develop_chinese_resources is completed
	JAP_develop_shandong_aluminium_deposits = { #597
		
		icon = aluminium

		highlight_state_targets = {
			state = 597
		}

		allowed = {
			original_tag = JAP
		}

		available = {
			597 = { is_controlled_by_ROOT_or_ally = yes }
			has_tech = excavation3
		}

		visible = {
			has_completed_focus = JAP_develop_chinese_resources
			597 = {
				NOT = {
					has_state_flag = shandong_aluminium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			597 = {
				add_resource = {
					type = aluminium
					amount = 14
				}
				set_state_flag = shandong_aluminium_developed
			}
		}
	}

	JAP_develop_suiyuan_steel_deposits = { #621
		
		icon = steel

		highlight_state_targets = {
			state = 621
		}

		allowed = {
			original_tag = JAP
		}

		available = {
			621 = { is_controlled_by_ROOT_or_ally = yes }
			has_tech = excavation2
		}

		visible = {
			has_completed_focus = JAP_develop_chinese_resources
			621 = {
				NOT = {
					has_state_flag = suiyuan_steel_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			621 = {
				add_resource = {
					type = steel
					amount = 14
				}
				set_state_flag = suiyuan_steel_developed
			}
		}	
	}

	JAP_develop_yunnan_aluminium_deposits = { #325

		icon = aluminium
		
		allowed = {
			original_tag = JAP
		}

		available = {
			325 = { is_controlled_by_ROOT_or_ally = yes }
			has_tech = excavation3
		}

		visible = {
			has_completed_focus = JAP_develop_chinese_resources
			325 = {
				NOT = {
					has_state_flag = yunnan_aluminium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			325 = {
				add_resource = {
					type = aluminium
					amount = 14
				}
				set_state_flag = yunnan_aluminium_developed
			}
		}	
	}
	JAP_develop_sichuan_aluminium_deposits = { #605

		icon = aluminium
		
		allowed = {
			original_tag = JAP
		}

		available = {
			605 = { is_controlled_by_ROOT_or_ally = yes }
			has_tech = excavation3
		}

		visible = {
			has_completed_focus = JAP_develop_chinese_resources
			605 = {
				NOT = {
					has_state_flag = sichuan_aluminium_developed
				}
			}
		}

		fire_only_once = yes

		cost = 25
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		complete_effect = {
			605 = {
				add_resource = {
					type = aluminium
					amount = 12
				}
				set_state_flag = sichuan_aluminium_developed
			}
		}	
	}
	
	JAP_chinese_factories_608 = { #608 Beijing

		icon = aluminium
		
		allowed = {
			original_tag = JAP
		}

		available = {
			608 =  { is_controlled_by_ROOT_or_ally = yes }
		}

		visible = {
			has_war_with = CHI
		}

		fire_only_once = yes

		cost = 15
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		remove_effect = {
			if = {
				limit = {
					608 =  { is_controlled_by_ROOT_or_ally = yes }
				}
				608 = { #Beijing
					remove_building = {
						type = arms_factory
						level = 2
					}
					remove_building = {
						type = industrial_complex
						level = 3
					}
				}
				530 = {
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}	
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				716 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}	
					if = {
			        	        limit = {
				        	608 =  { has_state_flag = mission_succeeded } }
				        add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					}
				}
			}
		}
	}
	JAP_chinese_factories_613 = { #613 Nanjing/Shanghai

		icon = aluminium
		
		allowed = {
			original_tag = JAP
		}

		available = {
			613 =  { is_controlled_by_ROOT_or_ally = yes }
		}

		visible = {
			has_war_with = CHI
		}

		fire_only_once = yes

		cost = 15
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		remove_effect = {
			if = {
				limit = {
					613 =  { is_controlled_by_ROOT_or_ally = yes }
				}
				613 = { #Nanjing/Shanghai
					remove_building = {
						type = arms_factory
						level = 2
					}
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
				532 = {
					add_extra_state_shared_building_slots = 2
						
					if = {
			        	        limit = {
				        	613 =  { has_state_flag = mission_succeeded } }
				        add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				610 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}	
				}
			}
		}
	}
	JAP_chinese_factories_594 = { #594 Nanning

		icon = aluminium
		
		allowed = {
			original_tag = JAP
		}

		available = {
			594 =  { is_controlled_by_ROOT_or_ally = yes }
		}

		visible = {
			has_war_with = CHI
		}

		fire_only_once = yes

		cost = 15
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		remove_effect = {
			if = {
				limit = {
					594 =  { is_controlled_by_ROOT_or_ally = yes }
				}
				594 = { #Nanning
					remove_building = {
						type = arms_factory
						level = 1
					}
					remove_building = {
						type = industrial_complex
						level = 2
					}
				}
				533 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					if = {
			        	        limit = {
				        	594 =  { has_state_flag = mission_succeeded } }
				        add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					}
				}
				715 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	
	JAP_chinese_factories_592 = { #592 Guangzhou

		icon = aluminium
		
		allowed = {
			original_tag = JAP
		}

		available = {
			592 =  { is_controlled_by_ROOT_or_ally = yes }
		}

		visible = {
			has_war_with = CHI
		}

		fire_only_once = yes

		cost = 15
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 1
		}

		remove_effect = {
			if = {
				limit = {
					592 =  { is_controlled_by_ROOT_or_ally = yes }
				}
				592 = { #Guangzhou
					remove_building = {
						type = arms_factory
						level = 2
					}
					remove_building = {
						type = industrial_complex
						level = 3
					}
				}
				535 = {
					add_extra_state_shared_building_slots = 2
					if = {
			        	        limit = {
				        	592 =  { has_state_flag = mission_succeeded } }
				        add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					}
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
					
				}
				328 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}	
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

}
