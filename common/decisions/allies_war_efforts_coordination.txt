coordinate_war_effort = {

	# Decisions for Faction Leaders or Overlords to order their allies / puppets to defend or not defend another allied country
	# In short: Country X can get ordered by the Faction Leader or Overlord to defend or not defend Country Y
	
	game_guide = {
		icon = generic_decision

		visible = {
			always = yes
		}

		fire_only_once = no

		days_re_enable = 10

		cost = 0

		ai_will_do = {
			factor = 0
		}

		complete_effect = {
            country_event = startevent.9
		}
	}

	coordinate_war_effort = {
		name = "Coordinate the War Effort"
		icon = generic_operation

		#days_remove = 0
		
		available = { #just a nice and clear tooltip
		}

		visible = {
			has_war = yes 
			is_in_faction = yes
			NOT = { has_country_flag = coordinate_war_effort }
		}
		
		complete_effect = {
			set_country_flag = coordinate_war_effort
			
			every_country = {
				limit = {
					OR = {
						is_in_faction_with = ROOT 
						is_subject_of = ROOT 
					}
					NOT = { has_country_flag = EAI_ignore_borders_@ROOT }
				}
				ROOT = { 	
					activate_targeted_decision = {
						decision = coordinate_war_effort_@FROM
						target = PREV
					}
				}
			}
			
			every_country = {
				limit = {
					OR = {
						is_in_faction_with = ROOT 
						is_subject_of = ROOT 
					}
					has_country_flag = EAI_ignore_borders_@ROOT
				}
				ROOT = { 	
					activate_targeted_decision = {
						decision = stop_coordinate_war_effort_@FROM
						target = PREV
					}
				}
			}
				
		}

		ai_will_do = {
			factor = 0
		}
	}
	coordinate_war_effort_@FROM = {
		name = "[From.GetAdjective] will not defend your borders"
		icon = generic_operation

		#days_remove = 0
		
		available = {
			
		}

		visible = {
			has_war = yes
			has_country_flag = coordinate_war_effort
			FROM = {
				OR = {
				is_in_faction_with = ROOT 
				is_subject_of = ROOT 
				}
				NOT = { tag = ROOT }
				NOT = { has_country_flag = EAI_ignore_borders_@ROOT }
			}
		}

		#target_trigger = {
		#	FROM = {
		#		OR = {
		#			is_in_faction_with = ROOT 
		#			is_subject_of = ROOT 
		#		}
		#	}
		#}
		
		complete_effect = {
			FROM = { set_country_flag = EAI_ignore_borders_@ROOT }
			clr_country_flag = coordinate_war_effort
		}
		ai_will_do = {
			factor = 0
		}
	}
	stop_coordinate_war_effort_@FROM = {
		name = "[From.GetAdjective] will restart defending your borders"
		icon = generic_operation

		#days_remove = 0
		
		available = {
			
		}

		visible = {
			has_war = yes
			has_country_flag = coordinate_war_effort
			FROM = {
				OR = {
				is_in_faction_with = ROOT 
				is_subject_of = ROOT 
				}
				NOT = { tag = ROOT }
				has_country_flag = EAI_ignore_borders_@ROOT
			}
		}

		#target_trigger = {
		#	FROM = {
		#		OR = {
		#			is_in_faction_with = ROOT 
		#			is_subject_of = ROOT 
		#		}
		#	}
		#}
		
		complete_effect = {
			FROM = { clr_country_flag = EAI_ignore_borders_@ROOT }
			clr_country_flag = coordinate_war_effort
		}
		ai_will_do = {
			factor = 0
		}
	}
}
